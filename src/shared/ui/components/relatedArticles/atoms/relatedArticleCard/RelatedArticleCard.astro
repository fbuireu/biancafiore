---
import { Image } from "astro:assets";
import type { ArticleDTO } from "@application/dto/article/types";
import { ArticleType } from "@application/dto/article/types";
import clsx from "clsx";
import "./related-article-card.css";

type RelatedArticleCardProps = ArticleDTO;

const { pathname } = Astro.url;
const { title, description, variant, featuredImage, publishDate, author, tags, slug } =
	Astro.props as RelatedArticleCardProps;
---

<a class="related-article__link-card" href={`/articles/${slug}`} aria-label={title}>{" "}</a>
<article
  class={clsx(
    'related-article__item',
    {
      '--default-variant': variant === ArticleType.DEFAULT,
      '--no-image-variant': variant === ArticleType.NO_IMAGE,
    }
  )}
>
  {featuredImage && (
    <Image
      class="related-article__item__featured-image"
      src={featuredImage.url}
      width={featuredImage.details.width}
      height={featuredImage.details.height}
      alt={title}
      transition:name=`featured-image-${pathname}`
    />
  )}
  <time class="related-article__item__publish-date" dateTime={publishDate}>
    {publishDate}
  </time>
  <h3 class="related-article__title font-serif inner-section-title">{title}</h3>
  <p class="related-article__author">
    by <a href={`/tags/${author.slug}`}>{author.name}</a>
  </p>
  <p class="related-article__excerpt">{description}</p>
  <ul class="related-article__tags__list flex">
    {tags?.map(({slug, name}) => (
      <a class="related-article__tag__item" href={`/tags/${slug}`}>
        #{name}
      </a>
    ))}
  </ul>
</article>