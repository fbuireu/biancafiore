---
import type { ArticleDTO } from "@application/dto/article/types";
import RelatedArticleCard from "./atoms/relatedArticleCard/RelatedArticleCard.astro";
import "./related-articles.css";

type RelatedArticleProps = ArticleDTO;

const { article } = Astro.props as RelatedArticleProps;
const { relatedArticles } = article;
---
{
    relatedArticles.length > 0 && (
    <section class="related-articles__wrapper common-wrapper">
        <h3 class="related-articles__title section-title">You might also like</h3>
        <ul class="related-articles__grid__list flex row-wrap justify-space-between">
          {relatedArticles.map((relatedArticle, index) => (
              <li class="related-articles__grid__item">
                  <RelatedArticleCard {...relatedArticle} />
              </li>
              <script type="application/ld+json" set:html={JSON.stringify({
                "@context": "https://schema.org",
                "@type": "ItemList",
                "itemListElement": {
                  "@type": "ListItem",
                  "position": index + 1,
                  "url": new URL(relatedArticle.slug, Astro.url).href
                }
              })}/>
          ))}
        </ul>
    </section>
)}
